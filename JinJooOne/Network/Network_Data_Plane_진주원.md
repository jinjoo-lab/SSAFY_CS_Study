# [컴퓨터 네트워킹 하향식 접근] CHAPTER 8. 네트워크 계층: 데이터 평면

### ⏰35min

## 1. 네트워크 계층과 평면

### 네트워크 계층의 역할과 두 개 평면에 대해 다음의 키워드를 포함하여 간략히 작성해주세요.

**[포워딩, 라우팅, 소프트웨어, 하드웨어]**

- 네트워크 계층은 호스트 간의 통신을 지원하는 계층이며 크게 상호작용하는 데이터 평면과 제어 평면으로 나뉜다.
- 데이터 평면은 빠른 시간 내에 처리를 위해 하드웨어로 구성되며 입력 포트에서 적절한 출력포트를 찾는 포워딩 작업을 수행한다.
- 제어 평면은 데이터 평면에 비해 더 큰 시간을 요구하므로 소프트웨어로 구성되며 출발지 호스트로부터 적절한 목적지 호스트까지의 패킷 경로를 결정하는 라우팅 작업을 수행한다.

## 2. 라우터의 구조

### 2-1. 주어진 그림을 바탕으로 라우터 내부 구조를 간략하게 설명해주세요.

https://github.com/yeondori/SSAFY_CS_Study/assets/93027942/fa510b45-8849-48db-92ba-c78d4f9d8cdb

- 라우터의 내부 구조는 크게 입력 포트 , 출력 포트 , 스위치 구조 , 라우팅 프로세서로 이루어진다.
- 입력 포트는 링크 계층과 물리 계층의 역할도 동시에 수행하며 가장 중요한 검색 기능을 수행한다. 검색 기능이란 들어온 패킷을 적절한 출력 포트로 내보내기 위해 포워딩 테이블을 참고하여 결정하는 작업이다.
- 출력 포트는 말 그대로 나온 패킷을 다음 출력 링크로 내보내는 곳이다.
- 스위치 구조는 입력 포트에서 포워딩을 통해 결정된 출력 포트로 패킷을 이동 시키는 곳이다.
    - 스위치 구조의 방식으로는 크게 메모리 , 버스 , 상호 연결 네트워크 방식이 있다.

### 2-2. 정확히 같은 시간에 2개의 패킷이 서로 다른 (1)에 도착했을 때, [그림2]의 a,b,c의 경우 서로 다른 2개의 (3)으로 동시에 전달이 가능한가요?

- 서로 다른 입력 포트로 패킷이 도착하였을 때 서로 다른 출력 포트로 패킷이 이동 가능한가에 대해 a,b는 불가능 , c는 가능하다.
- a 메모리 방식과 버스 방식은 내부적으로 공통 버스를 이용하여 동시에 처리 불가능하다.
- c 상호 연결 네트워크 방식은 서로 다른 입력 포트에 대해 병렬적으로 처리 가능하기 때문에 동시 전달 가능하다.

### 2-3. 패킷을 전송하는 시간을 D라고 했을 때, D의 함수로서 (a), (b), (c) 구조에서 패킷의 최대 지연은 얼마인가요? (단, 모든 패킷은 다른 출력 포트로 전달되며 입력 라인 및 출력 라인의 전송률과 각 구조의 전송률이 같다고 가정)

1. D
2. D
3. 루트 D

## 3.큐잉

### 3-1. 다음의 그림이 설명하는 현상에 대해 간략하게 서술해주세요.

https://github.com/yeondori/SSAFY_CS_Study/assets/93027942/1400862e-cdf8-4917-9c71-1b27f60625cb

- HOL Blocking
    - 입력 포트에서 앞에 다른 패킷의 출력 포트로 또 다른 패킷이 들어감에 있어 대기하고 있기 때문에 자신의 출력 포트가 비어있음에도 대기하여 지연되는 상태

### 3-2. 출력 포트에서 스위치 구조가 포트 라인 속도보다 N배 빠른 경우에 패킷 큐잉이 발생하나요?

> 네
>

### 3-3. [RFC 3439]에서 버퍼 크기는 링크 용량이 C일 때 $RTT*C$ 이나, 최근에는 $RTT*C/N^(1/2)$ 로 제안되고 있습니다. 버퍼의 크기와 큐잉 지연, 패킷 손실은 어떤 관계가 있나요?

> 버퍼의 크기가 크다는 것은 곳 큐잉 지연이 더 크다는 것을 의미한다. 하지만 버퍼의 크기가 너무 작다면 큐에 대기할 수 있는 패킷의 수도 적다는 것이고 그렇기 때문에 패킷 손실이 더 자주 발생할 것이다. 적절한 크기가 BEST !
>

## 4.IPv4 vs IPv6

### 다음의 IPv4의 데이터 그램 포맷을 참조하여 IPv4와 IPv6을 비교해주세요.

https://github.com/yeondori/SSAFY_CS_Study/assets/93027942/6c0643c6-0143-4a0d-9586-629d5929dad8

- IPv6는 우선 헤더의 가변 크기를 허용하지 않고 40바이트 고정 크기를 사용한다. 이에 반해 IPv4는 헤더의 가변 크기를 허용하기 때문에 이를 Option 필드에서 처리한다. (IPv6에는 Option이 없다)
- IPv4의 주소 크기는 32비트지만 IPv6는 128비트를 사용한다.
- IPv6에는 헤더 체크섬 필드가 없는데 그 이유는 해당 체크섬을 확인하는 과정에서 시간이 지연되기 때문이다.

## 5.DHCP

### DHCP 프로토콜의 4단계에 대해 설명해주세요.

1. DHCP 발견
    - 클라이언트는 새로 접속한 DHCP 서버를 발견했을 때 DHCP 요청 메시지를 보낸다. 이 메시지를 UDP 전송 프로토콜을 통해 전송하는데 Ip 데이터그램으로 캡슐화될 떄 출발지 주소가 0.0.0.0 목적지 주소가 255.255.255.255로 브로딩캐스팅되어 전송한다.
2. DHCP 제공
    - 클라이언트의 메시지를 전달받은 DHCP 서버 또한 사용자에게 DHCP 제공 메시지를 전송한다.
3. DHCP 요청
    - DHCP 제공 메시지를 받은 클라이언트는 서버에 DHCP 요청 메시지를 전송한다.
4. DHCP ACK
    - DHCP 서버는 마지막으로 클라이언트에게 DHCP ACK 메시지를 전송하고 이 응답이 클라이언트에 도착한 경우 둘 사이의 확인 과정은 종료되고 클라이언트는 IP를 이용할 수 있다.
