# 풀이

## 1.**네트워크 계층의 역할과 두 개 평면에 대해 다음의 키워드를 포함하여 간략히 작성해주세요.**

---

네트워크의 계층의 역할은 출발 호스트에서 전달한 데이터 그램을 목적지 호스트까지 전달하는 것이다.

네트워크 계층에는 크게 데이터 평면과 제어 평면으로 나뉘어 진다.

데이터 평면은 포워딩 역할을 수행하게 된다. 포워딩이란 라우터의 입력 포트로 들어온 데이터그램을 목적지 호스트로 향하게끔 적절한 출력포트로 전달하는 것을 의미한다. 이러한 기능은 매우 짧은 시간동안 소모되어야 하기에 주로 하드웨어로 구현되어있다.

제어 평면은 라우팅 역할을 수행하게 된다. 라우팅이란 출발지 호스트에서 목적지 호스트까지 적절한 경로를 결정해주는 기능이다. 이러한 경로는 라우팅 알고리즘에 의해 결정이 되어진다. 해당 기능의 경우는 초 단위로 실행되어지기에 소프트웨어로 구현되어진다.

## 2.1

### 주어진 그림을 바탕으로 라우터 내부 구조를 간략하게 설명해주세요.

---

(1) 입력라인

입력라인은 라우터로 데이터 그램이 들어오는 곳으로 내부에서 데이터 링크계층의 처리가 일어난다. 이후 가장 왼쪽의 블록에서 포워딩 테이블을 참조하여 적절한 출력라인로 보낸다.

제어 패킷의 경우는 라우팅 프로세서로 보내게된다.

(2) 스위치 구조

스위치 구조는 입력라인과 출력라인의 연결부분으로 구현 방식에 따라 각각 메모리,버스,크로스바로 구분이 되며, 이를 통해 적절한 출력라인으로 데이터그램을 옮기게 된다.

- 메모리
- 버스
- 크로스바

(3) 출력라인

출력라인은 데이터그램이 다음 경로로 나아가는곳이며 라우터가 양방향인 경우 입력라인과 서로 한 쌍을 이루게 된다.

(4) 라우팅 프로세서

제어 평면에 속하는 요소로, 라우팅 기능을 담당한다.

## **2-2. 정확히 같은 시간에 2개의 패킷이 서로 다른 (1)에 도착했을 때, [그림2]의 a,b,c의 경우 서로 다른 2개의 (3)으로 동시에 전달이 가능한가요?**

a와 b의 경우는 한번에 하나의 패킷만 전달이 가능하기에 불가능 하다. c의 경우는 병렬성을 보장하지만 만약 두 패킷의 출력 라인까지의 경로중 겹치는 곳이 있다면 HOL이 일어나면서 전달이 안될수도 있다. 이외의 경우에는 다른 2개의 출력 라인으로 전달이 가능하다.

## **2-3. 패킷을 전송하는 시간을 D라고 했을 때, D의 함수로서 (a), (b), (c) 구조에서 패킷의 최대 지연은 얼마인가요? (단, 모든 패킷은 다른 출력 포트로 전달되며 입력 라인 및 출력 라인의 전송률과 각 구조의 전송률이 같다고 가정)**

??

## 3.1. **다음의 그림이 설명하는 현상에 대해 간략하게 서술해주세요.**

1번째와 3번째의 입력 라인의 첫 패킷의 경우는 두 패킷이 같은 경로를 향하기 때문에 한 패킷이 대기를 해야하는 현상이다.

빨간 패킷의 경우는 다른 패킷과 출력라인과 겹치지 않지만 다른 패킷의 경로와 서로 겹치기 때문에 대기를 해야하는 현상이다. 이를 HOL 블로킹이라고 한다.

## 3.2 **출력 포트에서 스위치 구조가 포트 라인 속도보다 N배 빠른 경우에 패킷 큐잉이 발생하나요?**

발생한다. 만약 N개의 입력 포트에서 하나씩 패킷이 동일한 출력포트로 가게되면 이를 처리하는 동안 다음 패킷들도 오기에 큐잉이 필요로 하게 되어진다.

## 3.3

### [RFC 3439]에서 버퍼 크기는 링크 용량이 C일 때 $RTT*C$ 이나, 최근에는 $RTT*C/N^(1/2)$ 로 제안되고 있습니다. 버퍼의 크기와 큐잉 지연, 패킷 손실은 어떤 관계가 있나요?

버퍼의 크기가 커짐에 따라 패킷의 손실은 줄게되지만 그만큼 패킷의 전송에 지연이 발생하게 됩니다.

## 4.**다음의 IPv4의 데이터 그램 포맷을 참조하여 IPv4와 IPv6을 비교해주세요.**

IPv6의 경우 IPv4와 다르게 보편적인 20바이트의 헤더가 아닌 고정적인 40바이트의 헤더를 가집니다.

추가적으로 IPv6의 IP주소의 크기는 128비트로 늘어나게 되었습니다.

또한 트랜스포트 계층에서의 체크섬과 중복된다는 것을 고려해서 헤더 체크섬과 관련된 필드를 제거하였습니다.

또한 패킷의 분할 및 재조합을 양 측단에서만 실행하기에 이에 관련된 필드도 제거되었습니다.

## **5.DHCP 프로토콜의 4단계에 대해 설명해주세요.**

새로 연결된 호스트는 해당 서브넷에 존재하는 DHCP 서버를 찾기위해 패킷을 보냅니다. 이때 브로드 캐스팅(0.0.0.0 → 255.255.255.255)으로 보내게 도됩니다.

해당 패킷을 받은 DHCP 서버는 이에 대한 응답을 브로드캐스팅으로 보내주게 됩니다. 이때 해당 호스트에게 할당해줄 ip주소도 같이 담아서 보냅니다.

한 서브넷에 DHCP서버는 여러개가 있을수 있기에 이것들을 받은 호스트는 최적의 서버를 선정하고 이에 대해 해당 ip를 사용하겠다고 요청 메시지를 보내게됩니다.

이를 받은 DHCP서버는 이에 대한 응답을 보냄으로서 프로토콜이 마무리되게됩니다.