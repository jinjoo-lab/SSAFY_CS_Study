# 데이터베이스 인덱스 사용이유와 장점

## 용어정리

풀테이블 스캔 : 테이블에 존재하는 모든 데이터를 읽어 가면서 조건에 맞으면 결과로서 추출하고 조건에 맞지 않으면 버리는 방식이다.

인덱스 스캔 : 인덱스를 구성하는 컬럼의 값을 기반으로 데이터를 추출하는 액세스 기법이다.

옵티마이저 : 효율적인 방법으로 SQL을 수행할 최적의 처리 경로를 생성해주는 DBMS의 핵심 엔진입니다.

## 인덱스란?

인덱스는 추가적인 쓰기 작업과 저장 공간을 활용하여 데이터베이스 테이블레 저장된 데이터의 검색 속도를 향상 시키기 위한 자료구조이다.

데이터베이스 내의 특정 컬럼이나 컬럼들의 조합에 대한 값과 해당 값이 저장된 레코드의 위치를 매핑하여 데이터 베이스 쿼리의 성능을 최적하는데 중요한 역할을 한다.

### 인덱스 장점

검색 대상 레코드의 범위를 줄여 검색속도를 빠르게할수 있다.

특정 컬럼의 유일성을 보장할 수 있다. 

ORDER BY절과 GROUP By절 WHERE 절 등이 사용되는 작업이 더욱 효율적으로 처리된다.

### 단점

인덱스 생성에 따른 추가적인 저장 공간이 필요하다

한 페이지를 동시에 수정할 수 있는 병행성이 줄어든다

인덱스 생성 시간이 오래 걸릴 수 있다.

## 인덱스의 다양한 자료구조

### 해시 테이블

컬럼의 값과 물리적 주소를 (key, value)의 한쌍으로 저장하는 자료구조이다.

해시 테이블은 등호 연산에 최적화 되어 있기 떄문에 특정 칼럼이 등호연산을 자주해야 하는경우 사용하면 좋다.

일반적으로 db의 경우 등호가 아닌 부등호의 연산이 자주 사용되기 때문에 자주 사용되는 구조는 아니다.

### B-Tree

Root Node/ Branch Node /Leaf Node으로 구성되어 계층적 구조를 가지고 있다.

**특징**

Branch Node와 LeafNode에 인덱스(Key)와 데이터(Value)를 저장할 수 있다.

어떤 값에 대해서도 같은 시간에 결과를 얻을 수 있다.

테이블 갱신의 반복을 통해 균형이 깨지고, 성능도 악화된다.

### B+Tree

B-Tree의 확장된 개념으로 B-Tree와 같이 Root Node/ Branch Node /Leaf Node으로 구성되어 계층적 구조를 가지고 있다.

특징

- Leaf Node만이 인덱스(Key)와 데이터(Value)를 가지고 있으며, 나머지 Root Node와 Branch Node는 데이터 엑세스를 위한 인덱스(Key)를 가진다.
- Leaf Node끼리는 Linked List로 연결되어 있어 순차 탐색을 지원한다.

### 추가 정보

옵티마이저가 전체 테이블 스캔을 선택하는 경우

1. 적용 가능한 인덱스가 없는 경우
2. 넓은 범위의 데이터 액세스(범위가 넓어 인덱스가 필요 없는경우)
3. 소량의 테이블 액세스
4. 병렬처리 액세스(병렬처리의 경우 전체 테이블 스캔이 효율적이다)
5. FULL 힌트를 적용한 경우