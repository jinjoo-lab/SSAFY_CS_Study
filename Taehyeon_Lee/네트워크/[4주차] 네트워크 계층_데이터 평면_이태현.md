# [4주차] 네트워크 계층_데이터 평면_이태현

### 1. 네트워크 계층과 평면

네트워크 계층에서 포워딩은 하드웨어로 구현되어 있으며, 라우터의 입력포트, 라우터구조, 출력포트로 이루어져있습니다. 라우터로 전달된 패킷을 패킷 헤더의 목적지 IP주소로 혹은목적지 네트워크의 다음 홉으로 전달하는 역할을 합니다. 물리 계층이에서 수행되며 하드웨어로 구현되어 빠른 처리가 가능합니다

라우팅의 경우 소프트웨어로 구현되어, 다른 라우터 및 네트워크 장비와 상호작용하며, 라우터의 포워딩 테이블을 업데이트합니다. 이 포워딩 테이블을 통해 라우터는 패킷 헤더의 목적지 IP주소를 바탕으로 적절한 출력 포트로 전달할 수있습니다. 라우팅은 패킷의 전달되는 전체적인 경로를 설정하는 역할을 합니다.

### **2. 라우터의 구조**

1. 입력포트
    1. 스위치에 도착하는 패킷을 입력받는 포트입니다. 도착한 패킷의 헤더를 확인하고 포워딩 테이블에서 헤더의 목적지 IP주소를 검색하는 역할을 합니다.
2. 스위치구조
    1. 포워딩 테이블을 기반으로 입력포트를 통해 전달된 패킷을 올바른 목적지 혹은 목적지 네트워크로 전송하기 위해 적절한 출력포트로 패킷을 전달합니다.
3. 출력포트
    1. 스위치 구조로부터 전달받은 패킷을 다음 홉으로 전달하는 역할을 합니다
4. 라우터 프로세서
    1. 다른 스위치와 네트워크 상호작용을 하며, 포워딩 테이블을 업데이트 합니다. 포워딩 테이블을 스위치에 전달하며, 전체적인 패킷의 전달 경로를 설정하고 네트워크 흐름을 제어합니다

### 2-2 **정확히 같은 시간에 2개의 패킷이 서로 다른 (1)에 도착했을 때, [그림2]의 a,b,c의 경우 서로 다른 2개의 (3)으로 동시에 전달이 가능한가요?**

a,b는 동시에 패킷을 전달할 수 없으며, 네트워크 연결 라우팅(c)의 경우, 동시에 전달 가능합니다

### **3 큐잉**

### **3-1 다음의 그림이 설명하는 현상에 대해 간략하게 서술해주세요.**

HOL 문제로, 입력포트로 들어오는 패킷의 양이 스위치 구조를 통해 출력포트로 전달되는 속도보다 느릴때 발생하는 문제입니다. 이는 앞선 패킷이 스위치 구조를 통해 출력포트로 전달되는 과정에서 지연이 발생할 경우, 뒤의 패킷은 해당 출력 포트로 전송되지 않음에도 출력이 지연되는 문제가 있습니다. 이는 스위치 구조가 병렬적으로 패킷을 처리하지 못하기 때문에 발생합니다.

### **3-2 출력 포트에서 스위치 구조가 포트 라인 속도보다 N배 빠른 경우에 패킷 큐잉이 발생하나요?**

출력포트가 스위치 구조에 N개 연결되어 있다고 가정할 때, 스위치 구조의 포트라인 속도보다 N배 빠르다면, 출력 포트에서는 패킷 큐잉이 발생하지 않습니다.

### **3-3 [RFC 3439]에서 버퍼 크기는 링크 용량이 C일 때 $RTT*C$ 이나, 최근에는 $RTT*C/N^(1/2)$ 로 제안되고 있습니다. 버퍼의 크기와 큐잉 지연, 패킷 손실은 어떤 관계가 있나요?**

버퍼 크기가 큰 경우, 입력 포트에서 더 많은 패킷이 대기할 수 있습니다. 이는 많은 양의 패킷이 전달 되더라도, 패킷을 삭제하지 않고, 더 많이 대기한다는 것을 의미합니다. 이런 경우, 처리가 지연되며, 더 많은 패킷이 대기하게 됩니다. 버퍼 크기가 크다는 것은 스위치가 클라이언트에게 네트워크가 지연되고 있다는 사실을 더 늦게 알리는 효과를 가져옵니다. 따라서 클라이언트가 네트워크 지연에 대처하는 시간을 늦어지게 만들어 더 많은 패킷 손실을 야기합니다.

### **4. 다음의 IPv4의 데이터 그램 포맷을 참조하여 IPv4와 IPv6을 비교해주세요.**

IPv4는 32비트로 IP주소를 나타내는데, IP주소의 고갈을 우려하여 128비트를 사용하는 IPv6가 등장하게 되었습니다. 

IPv6에서는 

### **5. DHCP 프로토콜의 4단계에 대해 설명해주세요.**

DHCP프로토콜은 클라이언트가 IP주소를 DHCP서버로부터 할당 받기 위해서 수행하는 과정입니다.

1. 클라이언트가 255.255.255.255 IP주소로 DHCP요청을 브로드캐스트합니다. 현재 클라이언트가 자신의 IP주소를 모르기 때문에, 브로드캐스트를 통해 주변의 DHCP서버에 IP주소를 요청할 수 있습니다. 이때, yiaddr의 값은 0.0.0.0.입니다
2. DHCP서버가 이 요청을 받으면 다시 yiaddr필드에 클라이언트에게 제공할 IP주소를 입력하여 255.255.255.255.주소로 다시 브로드캐스트합니다.
3. 클라이언트는 1개 이상의 DHCP로부터 응답을 받게 되는데 이 중 가장 효율적인 DHCP서버를 선택하여, 해당 DHCP서버로 확인 요청을 보냅니다. 이때 src IP는 전달받은 yiaddr을 입력하게 됩니다.
4. 연결을 요청받은 DHCP 다시 클라이언트에게 DHCP연결 확인 응답을 보냄으로써 클라이언트는 부여받은 IP를 사용할 수 있게 됩니다.