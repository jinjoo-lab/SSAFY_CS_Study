# 전역 변수를 위한 공간을 따로 둔 이유


일반적인 지역 변수는 → 함수의 스택 포인터인 esp(x64환경 rsp) 레지스터의 값을 기준으로한 상대 주소로 표현됨

따라서, 함수 A 내부의 변수 a와 함수 B의 변수 a는 서로 다른 주소를 가지게 됨

지역 변수와 다르게 “전역”변수는 어떤 함수에서든 접근이 가능해야한다

→ 호출된 순간마다 다른 값이 아닌 변하지 않는 절대 주소를 전역변수에게 할당해야한다

(진정한 의미의 변하지 않는 주소는 X → 프로세스가 실행 될 때마다 바뀜 & 프로세스가 한번 실행된 이후 다시 실행되기 전까지 바뀌지 않음)

변하지 않는 주소를 할당하기 위해서, 함수의 호출마다 생성 및 소멸하는 stack영역 외부에 존재 → data 영역

## 초기화 “된” 전역변수 vs 초기화 “안된” 전역변수

> 전역변수라고 해서 모두 다 같은 data영역에 들어가는 것은 아님
> 

→ 다음의 두 변수가 위치하는 공간은 다르다

- data 영역 : 초기화된 전역 변수가 위치하는 공간
- BSS 영역 :  초기화 되지 **않은** 전역 변수가 위치하는 공간
    - block started by symbol
    - 이 영역은
        - 초기화 되지 않은
        - 초기화를 0으로 한
        - 초기화를 [Null](https://namu.wiki/w/Null)로 한 포인터
        
        인 정적변수 및 전역변수를 위한 영역이다.
        

> 실행 파일에서의 차이
> 

초기화된 전역 변수는 해당 초기화 값이 실행파일 exe파일에 모두 찍혀 나온다

ex. 10000사이즈의 배열 선언 후 100개만 초기화 하더라도 10000개로 초기화된 배열전체가 메모리에 저장된다

초기화 되지 “않은” 전역변수는 프로그램(exe파일)의 추가적인 공간을 차지하지 않는다

초기화를 하지 않은 변수들을 위한 공간을 따로 만들어서 구분이 필요한 이유

→ 전체 프로그램의 크기를 작게 만들 수 있기 때문이다.

- 용량이 제한적인 ROM안에 프로그램을 효율적으로 저장하기 위함
    
대부분의 용량 걱정할 필요 없는 PC에 탑재되는 프로그램과는 달리 임베디드 시스템에 탑재되는 프로그램의 경우, 
작은 ROM 안에 프로그램을 욱여넣어야 하는 경우가 많이 있는데 초기값이 주어진 data영역에 들어가는 변수들은 변수마다 값을 넣어주는 공간만큼 용량을 차지하지만, 초기화 되지 않은 bss에 들어가는 변수들은 그 값을 넣어줄 필요가 없기에 그냥 변수가 있다! 라고만 해 주면 된다. 
따라서 변수의 값을 써 넣을 필요가 없으며 그만큼 프로그램의 용량이 작아지게 된다.


<br><br><br><br><br>
참고
[https://dev-game-standalone.tistory.com/71](https://dev-game-standalone.tistory.com/71)

[https://namu.wiki/w/BSS(컴퓨터공학)](https://namu.wiki/w/BSS(%EC%BB%B4%ED%93%A8%ED%84%B0%EA%B3%B5%ED%95%99))
