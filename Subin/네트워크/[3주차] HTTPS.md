# HTTPS

https://radial-swing-d4f.notion.site/HTTPS-8096f976bd99443f8d62012fd6acae1d?pvs=4

### [HTTPS]

- **HTTP의 문제점**
    
    HTTP는 암호화되지 않은 평문 데이터를 전송하는 프로토콜
    
    데이터의 도난 가능성 ↑
    
    ⇒ HTTPS 등장
    
- **HTTPS**
    
    *Hyper-Text Transfer Protocol Secure*
    
    HTTP 프로토콜 + SSL 프로토콜
    ⇒ HTTP를 SSL(Secure Sockets Layer) 프로토콜 위에서 돌아가도록 하여 클라이언트와 서버가 주고받는 텍스트를 암호화 (공개키 방식 + 대칭키 방식)
    
    443번 포트 사용
    
    <aside>
    🍒 **SSL 프로토콜**
    
    *SSL(Secure Sockets Layer)*
    
    클라이언트 및 서버 사이에서 전송되는 데이터를 안전하게 유지하도록 함
    
    ⇒ 클라이언트에서 서버의 ID 인증 가능
    
    </aside>
    

### [HTTPS 특징]

> **SSL 인증서**
> 
> 
> 사용자가 사이트에 제공하는 정보를 암호화하는 데 이용
> 
> ![Untitled](https://github.com/shin5774/SSAFY_CS_Study/assets/86918962/d1f82eff-57fb-48fd-81ec-4c7c074d286d)
> 
> 제 3자가 데이터를 훔치더라도, 데이터를 해독할 수 없어 데이터를 읽을 수 없다!
> 
> <aside>
> 🍒 **TLS의 이전 버전**
> 
> 사실 SSL은 TLS의 이전 버전으로, 현재 웹사이트에서 사용하고 있는 프로토콜은 TLS라고 부르는 것이 정확하다.
> 
> 하지만 두 프로토콜이 혼합되어 사용하기도 하고, 상대적으로 SSL이 더 유명하여 TLS를 SSL이라고 부르는 경우가 많다.
> 
> **[TLS]**
> 
> - 데이터 무결성 보장
> 데이터가 전송 중에 수정되거나 손상되는 것을 방지
> - 인증 기능 존재
> 사용자가 접속하려는 웹사이트와 통신하고 있음을 증명 가능
> </aside>
> 

### [암호화 방식]

SSL 핸드셰이크 단계까지는 공개키 방식, 그 이후의 HTTPS 통신은 대칭키 방식을 사용

> **대칭키 방식**
> 
> 
> 암호화, 복호화 과정에서 같은 키가 사용
> 
> ex) 암호화 시 “a”키 사용 → 복호화 시 “a”키 사용
> 
> - DES, 3DES, AES, SEED, ARIA
> - 기밀성 제공

> **공개키 방식 (=비대칭키 방식)**
> 
> 
> 암호화, 복호화 과정에서 다른 키(개인키, 공개키)가 사용
> 
> ex) 암호화 시 개인키 사용 → 복호화 시 공개키 사용
> 
> ex) 암호화 시 공개키 사용 → 복호화 시 개인키 사용
> 
> - 기밀성, 인증, 부인 방지 제공

<aside>
🍒 **기밀성, 무결성, 인증, 부인 방지**

**[기밀성]**
인가되지 않은 자는 정보를 확인하지 못하도록 하며, 정보가 유출되더라도 평문으로 해독할 수 없고 변조 또는 위조하지 못하도록 기밀을 유지

**[무결성]**
인가되지 않은 자로 부터 위조 또는 변조가 발생하지 않았는지 확인
* 대칭키, 공개키 알고리즘 모두 무결성 제공하지 않음.
   ⇒ 전자 서명(인증서)을 추가하여 해결!

**[인증]**
수신 받은 메시지가 송신자 본인이라는 것을 확인하고 증명

**[부인 방지]**
메시지를 보낸 사람이 보낸 사실을 부인하거나, 받은 사람이 받은 사실을 부인할 경우 증명하는 기술

</aside>

⇒ 암호화, 복호화 과정에서 동일한 키를 사용한다면 중간에 키를 도난당한 경우, 정보 노출의 문제가 있어 공개키 방식을 채택하였다.

⇒ 공개키 방식은 속도가 느리다는 단점이 존재하여, 이를 해결하고자 핸드셰이크 이후 과정에서는 대칭키 방식을 도입하였다.

⇒ 공개키 방식으로 대칭키를 전달하여, 서로 공유된 대칭키를 통해 통신이 이루어진다!

### [HTTPS 동작 과정]

- **인증서 발급 과정**
    
    ![Untitled](https://github.com/shin5774/SSAFY_CS_Study/assets/86918962/581e0a09-e03f-4587-a97c-3e6c302da03b)
    
    서버는 HTTPS를 적용하기 위해 공개키와 개인키를 생성한다.
    
    1. 사이트 정보, 공개키 제공
        
        서버는 신뢰할 수 있는 인증 기관(CA 기업)을 선택하고, 그 기관에게 자신의 공개키 관리를 부탁하며 계약한다.
        
        <aside>
        🍒 **CA 기업**
        
        *Certificate Authority*
        
        공개키를 저장해주는 신뢰성이 검증된 민간 기업
        
        HTTPS를 적용하려면 CA 기업의 인증서를 구입해야 한다.
        
        </aside>
        
    2. 검증 후 인증기관 개인키로 암호화
        
        계약이 완료된 인증 기관은 해당 기업의 이름, 서버 공개키, 공개키 암호화 방식을 담은 인증서를 생성하고, 해당 인증서를 인증 기관의 개인키로 암호화하여 서버에게 제공한다.
        
    3. 인증서 발급
        
        2번 과정을 통해 서버는 암호화된 인증서를 갖는다.
        
    4. 인증기관 공개키 제공
        
        서버의 공개키로 암호화된 HTTPS 요청이 아닌 다른 요청이 올 경우,
        서버는 암호화된 인증서를 클라이언트에게 전달한다.
        

- **암호화, 복호화 과정**
    
    ![Untitled](https://github.com/shin5774/SSAFY_CS_Study/assets/86918962/4585a90c-5c1c-4110-b5a7-3468910c6589)
    
    1. 사이트 접속
        
        사용자가 사이트에 접속한다.
        
    2. 발급받은 인증서 전송
        
        서버는 자신의 인증서를 웹 브라우저(클라이언트)에게 전송한다.
        
        <aside>
        💡 Ex) 클라이언트가 main.html 파일을 A서버에 요청했다고 가정
        
        HTTPS 요청이 아니기 때문에, 클라이언트는 암호화된 인증서를 받는다.
        
        </aside>
        
    3. 인증기관의 공개키로 해독
        
        웹 브라우저는 미리 알고 있던 인증 기관의 공개키로 인증서를 복호화하여 검증한다. 즉, 사이트의 정보와 서버의 공개키를 얻는다.
        
    4. 대칭키 생성
        
        3번 과정을 통해 획득한 서버의 공개키로 클라이언트가 서버와의 Handshaking 과정에서 주고받은 난수를 조합하여 대칭키를 생성한다.
        
    5. 암호화하여 전송
        
        서버의 공개키로 4번의 대칭키를 암호화하여 다시 서버로 전송한다.
        
    6. 사이트 개인키로 암호화된 대칭키 해독
        
        서버는 암호화된 대칭키를 자신의 개인키로 복호화하여 클라이언트와 동일한 대칭키를 획득한다.
        
- **세션 종료 과정**
    
    ![Untitled](https://github.com/shin5774/SSAFY_CS_Study/assets/86918962/a38d058b-5022-4119-82ff-79fb39dedc4b)
    
    클라이언트-서버 간 통신을 할 때 주고받는 메시지는 위 대칭키를 이용하여 암호화 및 복호화를 진행한다.
    
    세션이 종료되면 대칭키는 폐기된다.
    

### [HTTP vs HTTPS]

- **HTTP를 사용하는 경우**
    
    > 단순한 데이터 조회
    > 
    > 
    > 노출이 되어도 문제 없는 단순한 데이터를 처리하는 경우
    > 
    
    > 빠른 속도
    > 
    > 
    > HTTPS는 암호화/복호화 과정이 필요하여 HTTP보다 속도가 느리다.
    > 
    >  (하지만 현재는 거의 차이를 느끼지 못한다.)
    > 
    
    > 비용 절감
    > 
    > 
    > HTTPS는 인증서를 발급하고 유지하기 위한 추가 비용이 발생한다.
    > 
- **HTTPS를 사용하는 경우**
    
    > 민감한 데이터 처리
    > 
    > 
    > 금융 서비스, 온라인 결제, 개인 정보 등 민감한 데이터를 처리하는 경우
    > 
    
    > 검색엔진 최적화 (SEO)
    > 
    > 
    > HTTPS를 사용하는 웹 사이트는 검색 엔진에서 상위에 랭크된다.
    > 
    > ⇒ 많은 웹 사이트는 HTTPS를 통해 SEO를 개선하고 있다.
    > 
    > <aside>
    > 💡 2014년 8월 구글이 SSL화를 검색 순위 결정에 포함한다고 발표하였다.
    > 
    > </aside>
    >
