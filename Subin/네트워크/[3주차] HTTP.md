# HTTP

https://radial-swing-d4f.notion.site/HTTP-b4759959a79b40bdbad15966f1e2b595?pvs=4

### [WWW]

*World Wide Web*

사용자들이 서로의 정보를 공유할 수 있는 무형의 네트워크 공간

인터넷 상에서 정보(텍스트, 사진, 소리, 영상 등)를 하이퍼텍스트 방식으로 연결하여 제공하는 일종의 서비스

> **핵심 구성 요소**
> 
> - URL - 웹 자원의 통일된 위치 지정 방식
> - HTTP - 자원을 검색하고 접근 가능한 프로토콜
> - HTML - 자원들 사이를 쉽게 항해 가능한 언어

<aside>
🍒 **Web과 Internet**

*서로 다른 개념!*

인터넷 ⊃ 웹

⇒ 인터넷으로 여러 기능을 수행할 수 있는데, 그 중 하나가 웹이다.

</aside>

### [HTTP]

*Hyper-Text Transfer Protocol*

서버/클라이언트 모델을 따르는 인터넷 상에서 데이터를 주고받기 위한 프로토콜

HTML 문서, 이미지, 동영상, 텍스트 등 어떤 종류의 데이터도 전송 가능

80번 포트 사용

<aside>
🍒 **Port**
*”논리적인 접속장소”*

하나의 컴퓨터에는 여러 개의 서버가 동작할 수 있고, 각각의 서버는 Port로 구분한다.

</aside>

### [HTTP 특징]

> **TCP 기반의 통신**
> 
> 
> HTTP는 TCP/IP 스택 위에서 동작하며 TCP를 통해 데이터를 안전하게 전송 및 수신
> 
> ⇒ 웹페이지 및 웹 애플리케이션에서 데이터를 신뢰성 있게 교환 가능!
> 

> **무상태 프로토콜**
> 
> 
> 통신 과정에서 클라이언트와 서버 간의 상태를 유지하지 않음.
> 
> ⇒ 이전 요청과 현재 요청, 이후 요청 간에 상호 의존성이 없고, 각 요청은 독립적으로 처리
> 
> **[장점]**
> 
> 서버 측에 적은 부담
> 
> 많은 사용자의 요청 처리 가능
> 
> **[단점]**
> 
> 클라이언트와 서버 간의 세션 상태를 유지하기 위해 별도의 메커니즘 필요
> 
> ⇒ HTTP는 *쿠키*를 통해 문제 해결
> 
> <aside>
> 🍪 **쿠키**
> 
> 사용자가 같은 웹사이트를 방문할 때마다 읽은 정보를 해당 웹사이트의 서버에 저장해놓는 정보 조각.
> 
> </aside>
> 

> **요청 / 응답 모델**
> 
> 
> HTTP는 연결을 유지하지 않는 프로토콜이기 떄문에 요청/응답 방식으로 동작
> 
> ![Untitled](https://github.com/shin5774/SSAFY_CS_Study/assets/86918962/483e7d34-82cd-42d1-9547-ccb63fd4e5a4)
> 
> : 서버/클라이언트 모델
> 
>   클라이언트가 브라우저를 통해서 서비스를 요청하면,
> 
>   서버에서는 해당 요청에 맞는 결과를 찾아서
> 
>   사용자에서 응답하는 형태로 동작
> 

### [URI]

*Uniform Resource Identifiers*

인터넷의 자원을 식별할 수 있는 문자열

⇒ HTTP 요청은 URI를 통해 요청하는 리소스를 식별

URL과 URN의 상위 개념

<aside>
🍒 **URI, URL, URN**

![Untitled](https://github.com/shin5774/SSAFY_CS_Study/assets/86918962/fd5b8f9d-4dec-417e-8c15-02a61ec1cef4)

**[URL]**

*Uniform Resource Locator*
네트워크 상에서 리소스가 위치한 정보 (일반적으로 사이트 도메인을 의미)

**[URN]**

*Uniform Resource Name*

해당 자원의 이름

리소스 접근방법과 웹 상의 위치가 표기되지 않음
⇒ 실제 자원을 찾기 위해서는 URN을 URL로 변환하여 이용!

</aside>

### [HTTP 메시지]

서버와 클라이언트 간 데이터가 교환되는 방식

- ASCII로 인코딩된 텍스트 정보
- 요청, 응답의 두 가지 타입 존재
- 단순한 메시지 구조, 뛰어난 확장성

> **공통 구조**
> 
> 1. start-line
>     
>     요청이나 응답의 상태
>     
>     항상 첫 번째 줄에 위치 (응답에서는 status line이라고 함)
>     
> 2. HTTP header
>     
>     요청을 지정하거나, 메시지에 포함된 본문을 설명하는 헤더의 집합
>     
> 3. empty line
>     
>     헤더와 본문을 구분하는 빈 줄
>     
>     요청에 대한 모든 메타 정보가 전송되었음을 의미
>     
> 4. body
>     
>     요청이나 응답과 관련된 데이터
>     
>     요청과 응답의 유형에 따라 선택적으로 사용
>     
>     <aside>
>     🍒 **Payload**
>     
>     HTTP 요청을 보낼 때 전달되는 데이터
>     
>     JSON 형태 (key: 파라미터 이름 - value: 추출된 값)
>     
>     </aside>
>     

### [HTTP Request]

클라이언트에서 서버로 보내는 메시지

| Request Line |
| --- |
| Header |
| (white space) |
| Body |
- **Request Line**
    
    ![Untitled](https://github.com/shin5774/SSAFY_CS_Study/assets/86918962/f33e2478-2552-441c-86df-aa24c000d101)
    
     1)  HTTP method
    
    서버가 수행할 작업(GET, PUT, POST 등)이나 방식(HEAD or OPTIONS) 설명
    
     2)  Request URI
    
    요청 대상(일반적으로 URL이나 URI) 또는 프로토콜, 포트, 도메인의 절대 경로
    
     3)  HTTP 버전 
    
- **Header**
    
    ![Untitled](https://github.com/shin5774/SSAFY_CS_Study/assets/86918962/bd1a1d32-e32a-4337-b1a6-02fe36736e37)
    
     1)  Request 헤더
    
    요청의 내용을 좀 더 구체화하고, 컨텍스트 제공
    
    조건부로 제한하여 요청 내용을 수정하기도 함
    
     2)  General 헤더
    
    메시지 전체에 적용되는 헤더
    
     3)  Entity 헤더
    
    요청 본문에 적용되는 헤더
    
- **Body**
    
    선택적으로 삽입
    
    (GET, HEAD, DELETE, OPTIONS 처럼 리소스를 가져오는 요청에서는 보통 불필요)
    
    - 단일 리소스 본문
        
        헤더 두 개(Content-Type, Content-Length)로 정의된 단일 파일로 구성
        
    - 다중 리소스 본문
        
        multipart 본문으로 구성되며, 파트마다 다른 정보 포함
        
        일반적으로 HTML Form과 관련
        

### [HTTP Response]

서버가 클라이언트의 요청에 대해 응답하는 메시지

| Status Line |
| --- |
| Header |
| (white space) |
| Body |
- **Request Line**
    
    ![Untitled](https://github.com/shin5774/SSAFY_CS_Study/assets/86918962/b302c80b-1213-4fa0-9b24-f51d69cf4bb7)
    
     1)  HTTP 버전
    
    현재 프로토콜의 버전
    
     2)  상태 코드
    
    요청의 결과 (ex. 200, 302, 404 등)
    
    <aside>
    🍒 **요청의 결과**
    
    - **1XX : Informational (정보 제공)**
        
        임시 응답으로 현재 클라이언트의 요청까지는 처리되었으니 계속 진행하라는 의미
        
    - **2XX : Success (성공)**
        
        클라이언트의 요청이 서버에서 성공적으로 처리되었다는 의미
        
        - 200 (OK)
            
            서버가 요청을 성공적으로 처리하였음
            
        - 201 (Created)
            
            요청이 처리되어 새로운 리소스가 생성되었음
            
        - 202 (Accepted)
            
            요청은 접수하였지만, 처리가 완료되지 않았음
            
    - **3XX : Redirection (리다이렉션)**
        
        완전한 처리를 위해 추가 동작이 필요한 경우
        
        주로 서버의 주소 또는 요청한 URI의 웹 문서가 이동되었으니 그 주소로 다시 연결 시도하라는 의미
        
        - 301 (Moved Permanently)
            
            요청한 리소스가 새로운 URI로 이동하였음
            
        - 303 (See Other)
            
            다른 위치로 요청 필요함
            
        - 307 (Temporary Redirect)
            
            임시로 리다이렉션 요청 필요함
            
    - **4XX : Client Error (클라이언트 오류)**
        
        클라이언트의 요청 메시지 내용이 잘못된 경우를 의미
        
        - 400 (Bad Request)
            
            요청의 구문이 잘못되었음
            
        - 401 (Unauthorized)
            
            요청한 리소스에 대한 접근 권한이 없음
            
        - 403 (Forbidden)
            
            요청한 리소스에 대한 접근이 금지되었음
            
        - 404 (Not Found)
            
            요청한 리소스를 찾을 수 없음
            
    - **5XX : Server Error (서버 오류)**
        
        서버 사정으로 메시지 처리에 문제가 발생한 경우
        
        서버의 부하, DB 처리 오류, 서버에서 예외가 발생하는 경우를 의미
        
        - 500 (Internal Server Error)
            
            서버에서 오류가 발생하였음
            
        - 501 (Not Implemented)
            
            요청한 URI 메소드를 서버에서 구현하고 있지 않음
            
        - 502 (Bad Gateway)
            
            현재 서버에서 서비스를 제공할 수 없음
            
    </aside>
    
     3)  상태 텍스트 (이유 구문) 
    
    상태 코드에 대한 설명
    
- **Header**
    
    ![Untitled](https://github.com/shin5774/SSAFY_CS_Study/assets/86918962/ff517201-7b8d-4b48-8809-4bc40f77ee50)
    
     1)  Response 헤더
    
    상태 줄에 포함되지 못했던 서버에 대한 추가 정보 제공
    
     2)  General 헤더
    
    메시지 전체에 적용되는 헤더
    
     3)  Entity 헤더
    
    요청 본문에 적용되는 헤더 (요청 내에 본문이 없는 경우는 전송되지 않음)
    
- **Body**
    
    요청과 동일
    

### [HTTP 메서드]

- **HTTP 메서드 속성**
    
    > **안전 (Safe Methods)**
    > 
    > 
    > 리소스를 변경하지 않는 메서드 속성
    > 
    > ⇒ 데이터의 변경이 일어나지 않음!
    > 
    
    > **멱등 (Idempotent)**
    > 
    > 
    > 최종적인 결과는 동일한 메서드 속성
    > 
    > ⇒ 작업이 여러 번 수행되어도, 결과는 동일
    > 
    
    > **캐시 가능 (Cacheable)**
    > 
    > 
    > 응답 결과 리소스를 캐시해서 사용 가능한지에 대한 메서드 속성
    > 
    
    > **요청 / 응답에 Body 존재**
    > 
    > 
    > 요청 / 응답 시 데이터를 Message Body에 담아 보내는지에 대한 메서드 속성
    > 
    > 서버에 전달하고 싶은 데이터는 body를 토애 전달
    > 
    
- **주요 HTTP 메서드 특징**
    
    > **GET**
    > 
    > 
    > “리소스를 조회하는 메서드”
    > 
    > 서버에 전달하고 싶은 데이터는 query를 통해 전달
    > 
    > <aside>
    > 🍒 **query (쿼리 파라미터)**
    > 
    > 리소스 경로 뒤에 ‘?’를 붙혀 시작
    > Key-Value 형태로 데이터 전송
    > 추가적인 데이터는 ‘&’로 연결
    > 
    > ⇒ URL에 데이터가 노출되어 보안에 취약!
    > 
    > </aside>
    > 
    > |         안전 |          멱등 |       캐시 가능 | 요청에 본문 존재 | 응답에 본문 존재 |
    > | --- | --- | --- | --- | --- |
    > |            Y |             Y |              Y |             N |             Y |
    
    > **POST**
    > 
    > 
    > “요청 데이터를 처리하는 메서드”
    > 
    > - 새로운 데이터를 등록하는 경우
    > - 데이터를 처리하는 모든 기능 수행 가능
    > ⇒ 다른 메서드로 처리하기 애매한 경우 사용
    > 
    > 서버에 전달하고 싶은 데이터는 body를 통해 전달
    > 
    > |         안전 |          멱등 |       캐시 가능 | 요청에 본문 존재 | 응답에 본문 존재 |
    > | --- | --- | --- | --- | --- |
    > |            N |             N |              Y |             N |             N |
    
    > **PUT**
    > 
    > 
    > “리소스를 완전히 대체하는 메서드”
    > 
    > - 요청 데이터에 해당하는 리소스가 존재하면 대체
    >     
    >     ⇒ 기존 데이터 손실 가능
    >     
    > - 존재하지 않으면 새로 생성
    > 
    > <aside>
    > 🍒 **POST vs PUT**
    > 
    > - POST
    >     
    >     요청 시 클라이언트가 등록될 리소스의 경로를 모른다.
    >     
    > - PUT
    >     
    >     요청 시 클라이언트가 리소스를 알고 있다.
    >     
    > </aside>
    > 
    > 서버에 전달하고 싶은 데이터는 body를 통해 전달
    > 
    > |         안전 |          멱등 |       캐시 가능 | 요청에 본문 존재 | 응답에 본문 존재 |
    > | --- | --- | --- | --- | --- |
    > |            N |             Y |              N |             Y |             Y |
    
    > **PATCH**
    > 
    > 
    > “리소스를 부분적으로 대체하는 메서드”
    > 
    > - 요청 데이터만 부분적으로 변경
    > 
    > <aside>
    > 🍒 **PUT vs PATCH**
    > 
    > 리소스에 **"username" : "Lee", "age" : 20** 이 저장되었다고 가정.
    > 해당 리소스 경로에 **“age” : 50** 을 전송하면
    > 
    > - PUT
    >     
    >     “age” : 50
    >     ⇒ 기존 리소스 대체
    >     
    > - PATCH
    >     
    >     "username" : "Lee", "age" : 50
    >     ⇒ 부분적 대체
    >     
    > </aside>
    > 
    > 서버에 전달하고 싶은 데이터는 body를 토애 전달
    > 
    > |         안전 |          멱등 |       캐시 가능 | 요청에 본문 존재 | 응답에 본문 존재 |
    > | --- | --- | --- | --- | --- |
    > |            N |             N |              Y |             Y |             Y |
    
    > **DELETE**
    > 
    > 
    > “리소스를 제거하는 메서드”
    > 
    > 요청 리소스 경로의 데이터 삭제
    > 
    > |         안전 |          멱등 |       캐시 가능 | 요청에 본문 존재 | 응답에 본문 존재 |
    > | --- | --- | --- | --- | --- |
    > |            N |             Y |              N |             N |             Y |

### [HTTP 동작 과정]

1. **클라이언트 요청**
    
    웹 브라우저(다른 클라이언트 애플리케이션)는 사용자의 요청에 따라 HTTP 요청을 생성한다.
    
    (사용자의 요청? 웹 서버에 특정 리소스를 요청하는 것)
    
    이 때, 클라이언트는 서버에 연결하기 위해 URI를 통해 요청하는 리소스를 식별한다.
    
    클라이언트가 서버에 연결하면 HTTP 요청 메시지를 생성하고 서버로 전송한다.
    
2. **서버 응답 수신**
    
    서버는 클라이언트의 요청을 수신하고, 요청을 처리한 후 HTTP 응답 메시지를 생성한다.
    
3. **클라이언트 응답 처리**
    
    클라이언트는 서버로부터 받은 응답을 처리한다.
    
    상태 코드를 통해 요청이 처리되었는지 혹은 문제가 발생했는지를 판단한다.
    
    응답 본문을 통해 웹 페이지의 자원을 제공하거나 다른 처리를 수행한다.
    
4. **연결 종료**
    
    서버는 클라이언트와 연결을 종료한다.
    
5. **페이지 렌더링 (웹 브라우저의 경우)**
    
    웹 브라우저는 서버로부터 받은 데이터를 통해 웹 페이지를 렌더링하고 사용자에게 제공한다.
